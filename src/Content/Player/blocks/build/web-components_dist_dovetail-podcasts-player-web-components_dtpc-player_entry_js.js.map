{"version":3,"file":"web-components_dist_dovetail-podcasts-player-web-components_dtpc-player_entry_js.js?ver=1ba94b6f9bf2b6ea1d05","mappings":"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","sources":["webpack://dovetail-podcasts-player-blocks/../web-components/dist/dovetail-podcasts-player-web-components/dtpc-player.entry.js"],"sourcesContent":["import { g as getRenderingRef, f as forceUpdate, r as registerInstance, h, d as Host } from './index-DjC7PCMK.js';\nconst appendToMap = (map, propName, value) => {\n    const items = map.get(propName);\n    if (!items) {\n        map.set(propName, [value]);\n    }\n    else if (!items.includes(value)) {\n        items.push(value);\n    }\n};\nconst debounce = (fn, ms) => {\n    let timeoutId;\n    return (...args) => {\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n        timeoutId = setTimeout(() => {\n            timeoutId = 0;\n            fn(...args);\n        }, ms);\n    };\n};\nconst isConnected = (maybeElement) => !('isConnected' in maybeElement) || maybeElement.isConnected;\nconst cleanupElements = debounce((map) => {\n    for (let key of map.keys()) {\n        map.set(key, map.get(key).filter(isConnected));\n    }\n}, 2000);\nconst stencilSubscription = () => {\n    if (typeof getRenderingRef !== 'function') {\n        return {};\n    }\n    const elmsToUpdate = new Map();\n    return {\n        dispose: () => elmsToUpdate.clear(),\n        get: (propName) => {\n            const elm = getRenderingRef();\n            if (elm) {\n                appendToMap(elmsToUpdate, propName, elm);\n            }\n        },\n        set: (propName) => {\n            const elements = elmsToUpdate.get(propName);\n            if (elements) {\n                elmsToUpdate.set(propName, elements.filter(forceUpdate));\n            }\n            cleanupElements(elmsToUpdate);\n        },\n        reset: () => {\n            elmsToUpdate.forEach((elms) => elms.forEach(forceUpdate));\n            cleanupElements(elmsToUpdate);\n        },\n    };\n};\nconst unwrap = (val) => (typeof val === 'function' ? val() : val);\nconst createObservableMap = (defaultState, shouldUpdate = (a, b) => a !== b) => {\n    const unwrappedState = unwrap(defaultState);\n    let states = new Map(Object.entries(unwrappedState ?? {}));\n    const handlers = {\n        dispose: [],\n        get: [],\n        set: [],\n        reset: [],\n    };\n    const reset = () => {\n        states = new Map(Object.entries(unwrap(defaultState) ?? {}));\n        handlers.reset.forEach((cb) => cb());\n    };\n    const dispose = () => {\n        handlers.dispose.forEach((cb) => cb());\n        reset();\n    };\n    const get = (propName) => {\n        handlers.get.forEach((cb) => cb(propName));\n        return states.get(propName);\n    };\n    const set = (propName, value) => {\n        const oldValue = states.get(propName);\n        if (shouldUpdate(value, oldValue, propName)) {\n            states.set(propName, value);\n            handlers.set.forEach((cb) => cb(propName, value, oldValue));\n        }\n    };\n    const state = (typeof Proxy === 'undefined'\n        ? {}\n        : new Proxy(unwrappedState, {\n            get(_, propName) {\n                return get(propName);\n            },\n            ownKeys(_) {\n                return Array.from(states.keys());\n            },\n            getOwnPropertyDescriptor() {\n                return {\n                    enumerable: true,\n                    configurable: true,\n                };\n            },\n            has(_, propName) {\n                return states.has(propName);\n            },\n            set(_, propName, value) {\n                set(propName, value);\n                return true;\n            },\n        }));\n    const on = (eventName, callback) => {\n        handlers[eventName].push(callback);\n        return () => {\n            removeFromArray(handlers[eventName], callback);\n        };\n    };\n    const onChange = (propName, cb) => {\n        const unSet = on('set', (key, newValue) => {\n            if (key === propName) {\n                cb(newValue);\n            }\n        });\n        const unReset = on('reset', () => cb(unwrap(defaultState)[propName]));\n        return () => {\n            unSet();\n            unReset();\n        };\n    };\n    const use = (...subscriptions) => {\n        const unsubs = subscriptions.reduce((unsubs, subscription) => {\n            if (subscription.set) {\n                unsubs.push(on('set', subscription.set));\n            }\n            if (subscription.get) {\n                unsubs.push(on('get', subscription.get));\n            }\n            if (subscription.reset) {\n                unsubs.push(on('reset', subscription.reset));\n            }\n            if (subscription.dispose) {\n                unsubs.push(on('dispose', subscription.dispose));\n            }\n            return unsubs;\n        }, []);\n        return () => unsubs.forEach((unsub) => unsub());\n    };\n    const forceUpdate = (key) => {\n        const oldValue = states.get(key);\n        handlers.set.forEach((cb) => cb(key, oldValue, oldValue));\n    };\n    return {\n        state,\n        get,\n        set,\n        on,\n        onChange,\n        use,\n        dispose,\n        reset,\n        forceUpdate,\n    };\n};\nconst removeFromArray = (array, item) => {\n    const index = array.indexOf(item);\n    if (index >= 0) {\n        array[index] = array[array.length - 1];\n        array.length--;\n    }\n};\nconst createStore = (defaultState, shouldUpdate) => {\n    const map = createObservableMap(defaultState, shouldUpdate);\n    map.use(stencilSubscription());\n    return map;\n};\nclass playerStateFactory {\n    constructor() {\n        Object.defineProperty(this, \"stores\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n    }\n    createStore(src) {\n        const audioElm = new Audio();\n        audioElm.preload = 'none';\n        audioElm.src = src;\n        audioElm.volume = 0.8;\n        const newStore = createStore({\n            audioElm,\n            currentTime: audioElm.currentTime,\n            duration: audioElm.duration,\n            muted: audioElm.muted,\n            playing: !audioElm.paused,\n            volume: audioElm.volume,\n            seekTime: null,\n        });\n        this.stores.push(newStore);\n        return newStore;\n    }\n}\nconst factory = new playerStateFactory;\nconst dtpcPlayerCss = \":host {\\n  --_dtpc-player--foreground: var(--dtpc-player--foreground, CanvasText);\\n  --_dtpc-player--highlight: var(--dtpc-player--highlight, LinkText);\\n  --_dtpc-player--surface: var(--dtpc-player--surface, Canvas);\\n  --_dtpc-player--surface-opacity: var(--dtpc-player--bg-opacity, 0);\\n  --_dtpc-player--surface-blur: var(--dtpc-player--bg-blur, 0);\\n  --_dtpc-player--padding: var(--dtpc-player--padding, 0);\\n  --_dtpc-player--padding-inline: var(--dtpc-player--padding-inline, var(--_dtpc-player--padding));\\n  --_dtpc-player--padding-block: var(--dtpc-player--padding-block, var(--_dtpc-player--padding));\\n  --_dtpc-player--spacing: var(--dtpc-player--spacing, 0.5rem);\\n\\n  /* Time */\\n  --_dtpc-player--time--color: var(--dtpc-player--time--font-size, var(--_dtpc-player--foreground));\\n  --_dtpc-player--time--font-size: var(--dtpc-player--time--font-size, 0.875rem);\\n  --_dtpc-player--time--font-family: var(--dtpc-player--time--font-family, ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace);\\n  --_dtpc-player--time--font-weight: var(--dtpc-player--time--font-weight, inherit);\\n}\\n\\n.wrapper {\\n  display: grid;\\n\\n  & > * {\\n    grid-column: 1 / -1;\\n    grid-row: 1 / -1;\\n  }\\n}\\n\\n.main {\\n  --_spacing: var(--_dtpc-player--spacing);\\n  --_padding-inline: var(--_dtpc-player--padding-inline);\\n  --_padding-block: var(--_dtpc-player--padding-block);\\n\\n  display: flex;\\n  align-items: center;\\n  gap: var(--_spacing);\\n\\n  padding-inline: var(--_padding-inline);\\n  padding-block: var(--_padding-block);\\n}\\n\";\nconst DtpcPlayer = class {\n    constructor(hostRef) {\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"src\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"duration\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"audioDuration\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: this.duration\n        });\n        registerInstance(this, hostRef);\n    }\n    connectedCallback() {\n        const { state, onChange } = factory.createStore(this.src);\n        const { audioElm } = state;\n        let previousSeekTime = state.seekTime;\n        this.audioDuration = this.duration;\n        this.state = state;\n        state.duration = this.audioDuration;\n        onChange('seekTime', (seekTime) => {\n            if (previousSeekTime !== null && seekTime === null) {\n                audioElm.currentTime = previousSeekTime;\n                state.currentTime = previousSeekTime;\n            }\n            previousSeekTime = seekTime;\n        });\n        onChange('muted', (muted) => audioElm.muted = muted);\n        onChange('volume', (volume) => audioElm.volume = volume);\n        state.audioElm.addEventListener('loadedmetadata', (e) => {\n            state.currentTime = e.target.currentTime;\n            state.duration = e.target.duration;\n        });\n        state.audioElm.addEventListener('timeupdate', (e) => state.currentTime = e.target.currentTime);\n        state.audioElm.addEventListener('play', () => state.playing = true);\n        state.audioElm.addEventListener('pause', () => state.playing = false);\n    }\n    disconnectedCallback() {\n        this.state.audioElm.pause();\n    }\n    handleTogglePaused() {\n        if (this.state.audioElm.paused) {\n            this.state.audioElm.play()\n                .then(() => {\n            })\n                .catch((e) => {\n                console.error(e);\n            });\n        }\n        else {\n            this.state.audioElm.pause();\n        }\n    }\n    handleControlInit(e) {\n        if (e.detail instanceof Function) {\n            e.stopPropagation();\n            e.detail(this.state);\n        }\n    }\n    watchSrcHandler(newSrc) {\n        if (!this.state.audioElm.paused) {\n            this.state.audioElm.pause();\n        }\n        this.state.audioElm.src = newSrc;\n    }\n    render() {\n        return (h(Host, { key: '9418451f204b2349cc27758716a085bfd8ede364' }, h(\"div\", { key: 'e38c38f166ca83ea738a03721804e23527cb2a2a', class: \"wrapper\" }, h(\"div\", { key: 'e1fadfdebf7dba6b6a15fa1d7e1689d114e067ae', part: \"backdrop\" }), h(\"div\", { key: '30afd10f8dd61f515e250697026190da73c46e8f', class: \"main\" }, h(\"slot\", { key: '8b500e39691ead695867040475031de1b51a5537' })))));\n    }\n    static get watchers() {\n        return {\n            \"src\": [\"watchSrcHandler\"]\n        };\n    }\n};\nDtpcPlayer.style = dtpcPlayerCss;\nexport { DtpcPlayer as dtpc_player };\n"],"names":["g","getRenderingRef","f","forceUpdate","r","registerInstance","h","d","Host","appendToMap","map","propName","value","items","get","set","includes","push","debounce","fn","ms","timeoutId","args","clearTimeout","setTimeout","isConnected","maybeElement","cleanupElements","key","keys","filter","stencilSubscription","elmsToUpdate","Map","dispose","clear","elm","elements","reset","forEach","elms","unwrap","val","createObservableMap","defaultState","shouldUpdate","a","b","unwrappedState","states","Object","entries","handlers","_unwrap","cb","oldValue","state","Proxy","_","ownKeys","Array","from","getOwnPropertyDescriptor","enumerable","configurable","has","on","eventName","callback","removeFromArray","onChange","unSet","newValue","unReset","use","subscriptions","unsubs","reduce","subscription","unsub","array","item","index","indexOf","length","createStore","playerStateFactory","constructor","defineProperty","writable","src","audioElm","Audio","preload","volume","newStore","currentTime","duration","muted","playing","paused","seekTime","stores","factory","dtpcPlayerCss","DtpcPlayer","hostRef","connectedCallback","previousSeekTime","audioDuration","addEventListener","e","target","disconnectedCallback","pause","handleTogglePaused","play","then","catch","console","error","handleControlInit","detail","Function","stopPropagation","watchSrcHandler","newSrc","render","class","part","watchers","style","dtpc_player"],"sourceRoot":""}